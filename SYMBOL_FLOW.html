<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptSpeak Flow</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 40px;
        }
        .container { max-width: 1400px; margin: 0 auto; }

        h1 {
            text-align: center;
            font-size: 2rem;
            font-weight: 300;
            letter-spacing: 4px;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle {
            text-align: center;
            font-size: 1rem;
            color: #666;
            margin-bottom: 50px;
        }

        /* Flow Diagram */
        .flow-container {
            position: relative;
            padding: 40px 0;
        }

        /* Main Flow Line */
        .flow-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #00d4ff, #7b2cbf, #ff6b6b, #4ecdc4);
            transform: translateX(-50%);
            z-index: 0;
        }

        /* Flow Step */
        .flow-step {
            position: relative;
            display: flex;
            align-items: center;
            margin-bottom: 60px;
            z-index: 1;
        }
        .flow-step:last-child { margin-bottom: 0; }

        .flow-step.left .step-content { margin-right: auto; padding-right: 80px; text-align: right; }
        .flow-step.right .step-content { margin-left: auto; padding-left: 80px; text-align: left; }

        .step-content {
            width: 45%;
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.08);
            padding: 25px 30px;
            position: relative;
        }

        /* Connector dot */
        .step-dot {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 4px solid #1a1a2e;
            z-index: 2;
        }
        .flow-step:nth-child(1) .step-dot { background: #00d4ff; }
        .flow-step:nth-child(2) .step-dot { background: #7b2cbf; }
        .flow-step:nth-child(3) .step-dot { background: #ffc107; }
        .flow-step:nth-child(4) .step-dot { background: #4ecdc4; }
        .flow-step:nth-child(5) .step-dot { background: #ff6b6b; }
        .flow-step:nth-child(6) .step-dot { background: #81c784; }

        .step-number {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #666;
            margin-bottom: 8px;
        }
        .step-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .flow-step.left .step-title { justify-content: flex-end; }

        .step-title-icon {
            font-size: 1.5rem;
        }
        .step-desc {
            color: #999;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        .step-example {
            margin-top: 15px;
            background: rgba(0,0,0,0.3);
            padding: 12px 15px;
            border-radius: 8px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 0.8rem;
            color: #00d4ff;
        }

        /* Horizontal Flow Section */
        .horizontal-flow {
            margin: 80px 0;
            padding: 50px;
            background: rgba(255,255,255,0.02);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .hflow-title {
            text-align: center;
            font-size: 1.3rem;
            font-weight: 300;
            letter-spacing: 3px;
            margin-bottom: 40px;
            color: #888;
        }

        .hflow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        .hflow-steps::before {
            content: '';
            position: absolute;
            left: 10%;
            right: 10%;
            top: 40px;
            height: 3px;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf, #4ecdc4, #81c784);
            z-index: 0;
        }

        .hflow-step {
            text-align: center;
            z-index: 1;
            flex: 1;
        }
        .hflow-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 15px;
            border: 3px solid;
        }
        .hflow-step:nth-child(1) .hflow-icon { background: rgba(0,212,255,0.2); border-color: #00d4ff; }
        .hflow-step:nth-child(2) .hflow-icon { background: rgba(123,44,191,0.2); border-color: #7b2cbf; }
        .hflow-step:nth-child(3) .hflow-icon { background: rgba(78,205,196,0.2); border-color: #4ecdc4; }
        .hflow-step:nth-child(4) .hflow-icon { background: rgba(129,199,132,0.2); border-color: #81c784; }

        .hflow-label {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .hflow-desc {
            font-size: 0.8rem;
            color: #666;
        }

        /* Arrow between steps */
        .hflow-arrow {
            font-size: 1.5rem;
            color: #444;
            z-index: 1;
        }

        /* Use Case Grid */
        .usecase-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-top: 50px;
        }
        .usecase {
            background: rgba(255,255,255,0.02);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.08);
            padding: 25px;
        }
        .usecase-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        .usecase-icon {
            font-size: 1.5rem;
        }
        .usecase-title {
            font-weight: 600;
        }
        .usecase-flow {
            font-size: 0.85rem;
            color: #888;
            line-height: 1.8;
        }
        .flow-arrow { color: #00d4ff; margin: 0 5px; }

        /* Benefits Section */
        .benefits {
            margin-top: 60px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        .benefit {
            text-align: center;
            padding: 30px 20px;
            background: rgba(255,255,255,0.02);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .benefit-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        .benefit-title {
            font-weight: 600;
            margin-bottom: 8px;
        }
        .benefit-desc {
            font-size: 0.85rem;
            color: #666;
        }

        /* Problem/Solution */
        .problem-solution {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            align-items: center;
            margin: 60px 0;
            padding: 40px;
            background: rgba(255,255,255,0.02);
            border-radius: 20px;
        }
        .problem, .solution {
            padding: 30px;
            border-radius: 16px;
        }
        .problem {
            background: rgba(244,67,54,0.1);
            border: 1px solid rgba(244,67,54,0.3);
        }
        .solution {
            background: rgba(76,175,80,0.1);
            border: 1px solid rgba(76,175,80,0.3);
        }
        .ps-title {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        .problem .ps-title { color: #f44336; }
        .solution .ps-title { color: #4caf50; }
        .ps-content {
            font-size: 0.95rem;
            line-height: 1.7;
            color: #ccc;
        }
        .transform-arrow {
            font-size: 3rem;
            color: #00d4ff;
        }

        @media (max-width: 900px) {
            .flow-step { flex-direction: column; }
            .flow-step.left .step-content,
            .flow-step.right .step-content {
                width: 100%;
                margin: 0;
                padding: 20px;
                text-align: left;
            }
            .flow-line { display: none; }
            .step-dot { display: none; }
            .usecase-grid, .benefits { grid-template-columns: 1fr; }
            .problem-solution { grid-template-columns: 1fr; }
            .transform-arrow { transform: rotate(90deg); text-align: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>HOW PROMPTSPEAK WORKS</h1>
        <p class="subtitle">The complete flow from creation to agent grounding</p>

        <!-- Problem/Solution -->
        <div class="problem-solution">
            <div class="problem">
                <div class="ps-title">&#10007; Without PromptSpeak</div>
                <div class="ps-content">
                    <strong>Agent drift.</strong> Every AI interaction starts fresh. Context evaporates. Agents hallucinate. Multi-agent pipelines lose coherence. Critical constraints get ignored. There's no persistent memory of <em>what matters</em>.
                </div>
            </div>
            <div class="transform-arrow">&#10132;</div>
            <div class="solution">
                <div class="ps-title">&#10003; With PromptSpeak</div>
                <div class="ps-content">
                    <strong>Grounded agents.</strong> Symbols persist context across sessions. Commander's Intent anchors every response. Requirements are validated. Agents stay aligned. Knowledge compounds. Drift is detected and corrected.
                </div>
            </div>
        </div>

        <!-- Main Horizontal Flow -->
        <div class="horizontal-flow">
            <h2 class="hflow-title">THE SYMBOL LIFECYCLE</h2>
            <div class="hflow-steps">
                <div class="hflow-step">
                    <div class="hflow-icon">&#128221;</div>
                    <div class="hflow-label">CREATE</div>
                    <div class="hflow-desc">Define context with 5W+H</div>
                </div>
                <div class="hflow-arrow">&#10132;</div>
                <div class="hflow-step">
                    <div class="hflow-icon">&#128190;</div>
                    <div class="hflow-label">STORE</div>
                    <div class="hflow-desc">Persist in SQLite registry</div>
                </div>
                <div class="hflow-arrow">&#10132;</div>
                <div class="hflow-step">
                    <div class="hflow-icon">&#128279;</div>
                    <div class="hflow-label">REFERENCE</div>
                    <div class="hflow-desc">Agent loads symbol by ID</div>
                </div>
                <div class="hflow-arrow">&#10132;</div>
                <div class="hflow-step">
                    <div class="hflow-icon">&#9989;</div>
                    <div class="hflow-label">VALIDATE</div>
                    <div class="hflow-desc">Check output vs requirements</div>
                </div>
            </div>
        </div>

        <!-- Vertical Detailed Flow -->
        <div class="flow-container">
            <div class="flow-line"></div>

            <!-- Step 1: Human Creates Symbol -->
            <div class="flow-step left">
                <div class="step-content">
                    <div class="step-number">Step 1</div>
                    <div class="step-title">
                        <span>Human Creates Symbol</span>
                        <span class="step-title-icon">&#128100;</span>
                    </div>
                    <div class="step-desc">
                        User or system creates a symbol with structured context: who needs it, what it's about, why it matters, constraints, and the ultimate goal (Commander's Intent).
                    </div>
                    <div class="step-example">
                        ps_symbol_create({ symbolId: "&#926;.NVDA.Q3FY25", ... })
                    </div>
                </div>
                <div class="step-dot"></div>
            </div>

            <!-- Step 2: Registry Stores Symbol -->
            <div class="flow-step right">
                <div class="step-dot"></div>
                <div class="step-content">
                    <div class="step-number">Step 2</div>
                    <div class="step-title">
                        <span class="step-title-icon">&#128190;</span>
                        <span>Registry Stores Symbol</span>
                    </div>
                    <div class="step-desc">
                        Symbol is validated, hashed for integrity, and stored in SQLite with full-text search indexing. Relationships to other symbols are captured in the graph.
                    </div>
                    <div class="step-example">
                        SQLite: symbols table + symbols_fts + relationships
                    </div>
                </div>
            </div>

            <!-- Step 3: Agent Requests Context -->
            <div class="flow-step left">
                <div class="step-content">
                    <div class="step-number">Step 3</div>
                    <div class="step-title">
                        <span>Agent Requests Context</span>
                        <span class="step-title-icon">&#129302;</span>
                    </div>
                    <div class="step-desc">
                        When an AI agent needs to perform a task, it loads the relevant symbol. The 5W+H framework and Commander's Intent become the grounding context.
                    </div>
                    <div class="step-example">
                        ps_symbol_get({ symbolId: "&#926;.NVDA.Q3FY25" })
                    </div>
                </div>
                <div class="step-dot"></div>
            </div>

            <!-- Step 4: Agent Works With Grounding -->
            <div class="flow-step right">
                <div class="step-dot"></div>
                <div class="step-content">
                    <div class="step-number">Step 4</div>
                    <div class="step-title">
                        <span class="step-title-icon">&#9881;</span>
                        <span>Agent Works With Grounding</span>
                    </div>
                    <div class="step-desc">
                        The agent generates output while constrained by requirements, anti-requirements, and key terms. The Commander's Intent anchors the entire response.
                    </div>
                    <div class="step-example">
                        "Your goal: {commanders_intent}<br>
                        MUST include: {requirements}<br>
                        MUST NOT: {anti_requirements}"
                    </div>
                </div>
            </div>

            <!-- Step 5: Output Validated -->
            <div class="flow-step left">
                <div class="step-content">
                    <div class="step-number">Step 5</div>
                    <div class="step-title">
                        <span>Output Validated</span>
                        <span class="step-title-icon">&#128269;</span>
                    </div>
                    <div class="step-desc">
                        System checks if output contains required key_terms, doesn't violate anti_requirements, and aligns with the Commander's Intent. Drift is detected and logged.
                    </div>
                    <div class="step-example">
                        key_terms.every(term => output.includes(term))
                    </div>
                </div>
                <div class="step-dot"></div>
            </div>

            <!-- Step 6: Knowledge Compounds -->
            <div class="flow-step right">
                <div class="step-dot"></div>
                <div class="step-content">
                    <div class="step-number">Step 6</div>
                    <div class="step-title">
                        <span class="step-title-icon">&#128200;</span>
                        <span>Knowledge Compounds</span>
                    </div>
                    <div class="step-desc">
                        Symbols are versioned, relationships grow, patterns emerge. The registry becomes an institutional memory that future agents can query and build upon.
                    </div>
                    <div class="step-example">
                        ps_graph_neighborhood({ symbolId: "&#926;.NVDA", maxDepth: 2 })
                    </div>
                </div>
            </div>
        </div>

        <!-- Use Cases -->
        <h2 class="hflow-title" style="margin-top: 80px;">REAL-WORLD USE CASES</h2>
        <div class="usecase-grid">
            <div class="usecase">
                <div class="usecase-header">
                    <span class="usecase-icon">&#128200;</span>
                    <span class="usecase-title">Financial Analysis</span>
                </div>
                <div class="usecase-flow">
                    Load &#926;.NVDA.Q3FY25 <span class="flow-arrow">&#10132;</span>
                    Agent writes analysis <span class="flow-arrow">&#10132;</span>
                    Validate "$35.1B" appears <span class="flow-arrow">&#10132;</span>
                    Output meets requirements
                </div>
            </div>
            <div class="usecase">
                <div class="usecase-header">
                    <span class="usecase-icon">&#128269;</span>
                    <span class="usecase-title">Pattern Detection</span>
                </div>
                <div class="usecase-flow">
                    Create &#926;.K.PATTERN.X <span class="flow-arrow">&#10132;</span>
                    Document forensic finding <span class="flow-arrow">&#10132;</span>
                    Link to company symbols <span class="flow-arrow">&#10132;</span>
                    Query graph for related patterns
                </div>
            </div>
            <div class="usecase">
                <div class="usecase-header">
                    <span class="usecase-icon">&#129302;</span>
                    <span class="usecase-title">Multi-Agent Pipeline</span>
                </div>
                <div class="usecase-flow">
                    Agent 1 creates &#926;.T.TASK <span class="flow-arrow">&#10132;</span>
                    Agent 2 loads same symbol <span class="flow-arrow">&#10132;</span>
                    Shared context persists <span class="flow-arrow">&#10132;</span>
                    No telephone-game drift
                </div>
            </div>
        </div>

        <!-- Benefits -->
        <div class="benefits">
            <div class="benefit">
                <div class="benefit-icon">&#127919;</div>
                <div class="benefit-title">Persistent Context</div>
                <div class="benefit-desc">Symbols survive sessions. No more lost context.</div>
            </div>
            <div class="benefit">
                <div class="benefit-icon">&#9989;</div>
                <div class="benefit-title">Validated Output</div>
                <div class="benefit-desc">Requirements ensure completeness and accuracy.</div>
            </div>
            <div class="benefit">
                <div class="benefit-icon">&#128279;</div>
                <div class="benefit-title">Graph Relationships</div>
                <div class="benefit-desc">Symbols link to each other. Knowledge compounds.</div>
            </div>
            <div class="benefit">
                <div class="benefit-icon">&#128274;</div>
                <div class="benefit-title">Drift Detection</div>
                <div class="benefit-desc">Agents that stray from intent are flagged.</div>
            </div>
        </div>

        <!-- Architecture Summary -->
        <div class="horizontal-flow" style="margin-top: 60px;">
            <h2 class="hflow-title">SYSTEM ARCHITECTURE</h2>
            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; text-align: center;">
                <div style="background: rgba(0,212,255,0.1); padding: 20px; border-radius: 12px;">
                    <div style="font-size: 1.5rem; margin-bottom: 8px;">&#128187;</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">MCP Server</div>
                    <div style="font-size: 0.75rem; color: #666; margin-top: 5px;">50+ tools</div>
                </div>
                <div style="background: rgba(123,44,191,0.1); padding: 20px; border-radius: 12px;">
                    <div style="font-size: 1.5rem; margin-bottom: 8px;">&#128190;</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">SQLite</div>
                    <div style="font-size: 0.75rem; color: #666; margin-top: 5px;">WAL + FTS5</div>
                </div>
                <div style="background: rgba(255,193,7,0.1); padding: 20px; border-radius: 12px;">
                    <div style="font-size: 1.5rem; margin-bottom: 8px;">&#128200;</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">Graph Engine</div>
                    <div style="font-size: 0.75rem; color: #666; margin-top: 5px;">N-hop traversal</div>
                </div>
                <div style="background: rgba(76,175,80,0.1); padding: 20px; border-radius: 12px;">
                    <div style="font-size: 1.5rem; margin-bottom: 8px;">&#128737;</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">Gatekeeper</div>
                    <div style="font-size: 0.75rem; color: #666; margin-top: 5px;">Security + holds</div>
                </div>
                <div style="background: rgba(255,87,34,0.1); padding: 20px; border-radius: 12px;">
                    <div style="font-size: 1.5rem; margin-bottom: 8px;">&#128202;</div>
                    <div style="font-weight: 600; font-size: 0.9rem;">Drift Engine</div>
                    <div style="font-size: 0.75rem; color: #666; margin-top: 5px;">Behavior monitoring</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
